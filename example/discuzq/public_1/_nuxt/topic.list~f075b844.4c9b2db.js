(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{1019:function(t,e,r){},1020:function(t,e,r){},1152:function(t,e,r){"use strict";r(1019)},1153:function(t,e,r){"use strict";r(1020)},1210:function(t,e,r){"use strict";r.r(e);var n=r(717),time=r(716),o=r(714),c={name:"TopicItem",filters:{formatDate:function(t){return Object(time.b)(t)}},mixins:[r.n(o).a],props:{item:{type:Object,default:function(){}},showShare:{type:Boolean,default:!0}},data:function(){return{loading:!1,showVideoPop:!1,showViewer:!1}},computed:{thread:function(){return this.item&&this.item.lastThread&&this.item.lastThread.length>0&&this.item.lastThread[0]||{}},unpaid:function(){return this.thread&&!(this.thread.paid||0===parseFloat(this.thread.price))}},methods:{toDetail:function(){this.canViewPostsFn()&&this.routerLink()},onClickImage:function(){this.thread&&!this.thread.unpaid||!this.canViewPostsFn()||this.routerLink()},openVideo:function(){this.canViewPostsFn()&&(this.thread&&this.thread.unpaid?this.routerLink():this.showVideoPop=!0)},routerLink:function(){window.open("/thread/".concat(this.thread&&this.thread._jv&&this.thread._jv.id),"_blank")},onClickContent:function(t){var e=t||window.event;"a"!==(e.target||e.srcElement).nodeName.toLocaleLowerCase()&&this.toDetail()},canViewPostsFn:function(){return!(this.thread&&!this.thread.canViewPosts)||(this.$message.error(this.$t("home.noPostingTopic")),!1)},formatTopicHTML:function(html){return n.a.parse(html)}}},l=(r(1153),r(11)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"topic-container"},[r("div",{staticClass:"main-cont"},[r("div",{staticClass:"top-flex"},[r("div",{staticClass:"topic-title"},[t._v("\n        #"),r("span",{staticClass:"topic-name"},[t._v(t._s(t.item.content))]),t._v("#\n        "),1===t.item.recommended?r("svg-icon",{attrs:{type:"recommend"}}):t._e()],1),t._v(" "),r("div",{staticClass:"view-count"},[t._v("\n        "+t._s(t.$t("home.topicViewCount",{total:t.item.view_count}))+"\n      ")])]),t._v(" "),t.thread&&t.thread.firstPost?[r("div",{staticClass:"first-post",on:{click:function(e){return e.target!==e.currentTarget?null:t.toDetail.apply(null,arguments)}}},[r("div",{on:{click:t.onClickContent}},[r("div",{staticClass:"content"},[r("svg-icon",{directives:[{name:"show",rawName:"v-show",value:parseFloat(t.thread.price)>0,expression:"parseFloat(thread.price) > 0"}],staticClass:"icon-pay-yuan",attrs:{type:"pay-yuan"}}),t._v(" "),r("div",{class:{"content-block":parseFloat(t.thread.price)>0},domProps:{innerHTML:t._s(t.$xss(t.formatTopicHTML(t.thread.firstPost.summary)))}})],1)]),t._v(" "),t.thread?r("div",{directives:[{name:"viewer",rawName:"v-viewer",value:{url:"data-source"},expression:"{ url: 'data-source' }"}],staticClass:"images",on:{click:function(e){return e.target!==e.currentTarget?null:t.toDetail.apply(null,arguments)}}},t._l(t.thread.firstPost.images.slice(0,3),(function(image,e){return r("el-image",{key:e,staticClass:"image",attrs:{src:image.thumbUrl,"data-source":t.unpaid?"":image.url,alt:image.filename,fit:"cover",lazy:""},on:{click:function(e){return e.target!==e.currentTarget?null:t.onClickImage.apply(null,arguments)}}},[r("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[r("i",{staticClass:"el-icon-loading"})])])})),1):t._e(),t._v(" "),t.thread.firstPost.images&&t.thread.firstPost.images.length>3?r("div",{staticClass:"image-count",on:{click:t.toDetail}},[t._v("\n          "+t._s(t.$t("home.total"))+" "+t._s(t.thread.firstPost.images.length)+"\n          "+t._s(t.$t("home.seeAllImage"))+"\n        ")]):t._e()])]:t._e(),t._v(" "),r("div",{staticClass:"thread-count"},[t._v("\n      "+t._s(t.$t("home.topicCount",{total:t.item.thread_count}))+"\n    ")])],2)])}),[],!1,null,"6475988c",null);e.default=component.exports;installComponents(component,{SvgIcon:r(62).default})},1245:function(t,e,r){"use strict";r.r(e);r(34),r(24),r(39),r(53),r(54);var n=r(85),o=r(8),c=r(9),l=(r(31),r(35),r(13),r(714)),d=r.n(l),f=r(162),head=r(715),h=r.n(head);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var _={layout:"custom_layout",name:"TopicList",mixins:[d.a,h.a],asyncData:function(t,e){return Object(c.a)(regeneratorRuntime.mark((function r(){var n,o,c,l,d,h,m,_;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.store,f.a.isSpider||e(null,{}),o={include:"lastThread,lastThread.firstPost,lastThread.firstPost.images","page[limit]":10},c={include:"groups",limit:4},r.prev=4,l={},r.next=8,n.dispatch("jv/get",["topics",{params:o}]);case 8:return d=r.sent,r.next=11,n.dispatch("jv/get",["users/recommended",{params:c}]);case 11:h=r.sent,Array.isArray(d)?l.topicsData=d.slice(0,10):d&&d._jv&&d._jv.json&&((m=d._jv.json.data||[]).forEach((function(t,e){m[e]=v(v(v({},t),t.attributes),{},{_jv:{id:t.id}})})),l.topicsData=m),Array.isArray(h)?l.recommendUserData=h:h&&h._jv&&h._jv.json&&((_=h._jv.json.data||[]).forEach((function(t,e){_[e]=v(v({},t),t.attributes)})),l.recommendUserData=_),e(null,l),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(4),e(null,{});case 20:case"end":return r.stop()}}),r,null,[[4,17]])})))()},data:function(){return{title:this.$t("topic.topictitlelist"),loading:!1,topicsData:[],total:0,recommendUserData:[],pageNum:1,pageSize:10,hasMore:!1,filterSort:[{label:this.$t("topic.hot"),value:"-viewCount"},{label:this.$t("topic.contents"),value:"-threadCount"}],sort:""}},computed:{forums:function(){return this.$store.state.site.info.attributes||{}}},mounted:function(){this.getTopicList()},methods:{getTopicList:function(){var t=this;this.loading=!0;var e={include:"lastThread,lastThread.firstPost,lastThread.firstPost.images","page[number]":this.pageNum,"page[limit]":this.pageSize,sort:this.sort};this.$store.dispatch("jv/get",["topics",{params:e}]).then((function(e){t.hasMore=e.length===t.pageSize,1===t.pageNum?t.topicsData=e:t.topicsData=[].concat(Object(n.a)(t.topicsData),Object(n.a)(e)),t.pageNum+=1,e&&e._jv&&e._jv.json&&e._jv.json.meta&&(t.hasMore=t.topicsData.length<e._jv.json.meta.total,t.total=e._jv.json.meta.total)}),(function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},loadMore:function(){this.getTopicList()},handleCommandSort:function(t){this.sort=t,this.pageNum=1,this.topicsData=[],this.getTopicList()}}},w=(r(1152),r(11)),component=Object(w.a)(_,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"topic-content-container"},[r("div",{staticClass:"container"},[r("main",{staticClass:"cont-left"},[r("div",{staticClass:"header-filter"},[r("div",{staticClass:"title"},[t._v(t._s(t.total+t.$t("topic.topicCount")))]),t._v(" "),r("div",{staticClass:"filter"},[r("el-dropdown",{staticClass:"filter-dropdown",attrs:{placement:"bottom"},on:{command:t.handleCommandSort}},[r("span",{staticClass:"el-dropdown-link",class:{active:""!==t.sort}},[t._v("\n              "+t._s(t.$t("core.sort"))),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.filterSort,(function(e,n){return r("el-dropdown-item",{key:n,class:{active:e.value===t.sort},attrs:{command:e.value}},[t._v(t._s(e.label))])})),1)],1)],1)]),t._v(" "),r("div",{staticClass:"topic-list"},[t._l(t.topicsData,(function(t,e){return[r("topic-item",{key:e,attrs:{item:t}})]})),t._v(" "),r("list-load-more",{attrs:{loading:t.loading,"has-more":t.hasMore,"page-num":t.pageNum,length:t.topicsData.length},on:{loadMore:t.loadMore}})],2)]),t._v(" "),r("aside",{staticClass:"cont-right"},[r("div",{staticClass:"background-color"},[r("advertising")],1),t._v(" "),r("div",{staticClass:"recommend-user background-color"},[r("recommend-user",{attrs:{list:t.recommendUserData}})],1),t._v(" "),r("copyright",{attrs:{forums:t.forums}})],1)])])}),[],!1,null,"ed6204de",null);e.default=component.exports;installComponents(component,{TopicItem:r(1210).default,ListLoadMore:r(728).default,Advertising:r(755).default,RecommendUser:r(853).default,Copyright:r(756).default})},714:function(t,e,r){var n=r(726);r(31),r(52),t.exports={data:function(){var t=this;return{errorCodeHandler:{default:{model_not_found:function(){return t.$router.replace("/error")},not_authenticated:function(){return t.$router.push("/user/login")}},thread:{permission_denied:function(){return t.$router.replace("/error?code=permissionDenied")}}}}},methods:{handleError:function(t){var e=arguments,r=this;return n(regeneratorRuntime.mark((function n(){var o,c,l,d,f,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=e.length>1&&void 0!==e[1]?e[1]:"",c=t.response.data.errors,!(Array.isArray(c)&&c.length>0)){n.next=17;break}if(l=c[0].code,d=c[0].detail&&c[0].detail.length>0?c[0].detail[0]:c[0].code,f=c[0].detail&&c[0].detail.length>0?c[0].detail[0]:r.$t("core.".concat(d)),"site_closed"!==c[0].code){n.next=10;break}return n.next=9,r.siteClose(c);case 9:return n.abrupt("return",n.sent);case 10:if("need_ext_fields"!==c[0].code){n.next=14;break}return h=r.$store.getters["session/get"]("userId"),r.$router.push("/user/supple-mentary?id=".concat(h)),n.abrupt("return");case 14:"Permission Denied"===l?r.$message.error(r.$t("core.permission_denied2")):"content_banned_show_words"===l?r.$message.error(r.$t("core.content_banned_show_words")+c[0].detail):r.$message.error(f),r.errorCodeHandler.default[l]&&r.errorCodeHandler.default[l](),o&&r.errorCodeHandler[o][l]&&r.errorCodeHandler[o][l]();case 17:case"end":return n.stop()}}),n)})))()},siteClose:function(t){var e=this;return n(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.$store.dispatch("forum/setError",{code:t[0].code,detail:t[0].detail&&t[0].detail.length>0&&t[0].detail[0]});case 3:return r.next=5,e.$router.push("/site/close");case 5:r.next=9;break;case 7:r.prev=7,r.t0=r.catch(0);case 9:case"end":return r.stop()}}),r,null,[[0,7]])})))()}}}},715:function(t,e){t.exports={data:function(){return{title:"‎"}},computed:{forums:function(){return this.$store.state.site.info.attributes||{}}},head:function(){return{title:"‎"!==this.title&&this.forums&&this.forums.set_site&&this.forums.set_site.site_name?"".concat(this.title," - ").concat(this.forums.set_site.site_name):this.title}}}},716:function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return o})),r.d(e,"a",(function(){return c}));r(52),r(159);var n=function(time){var t=((window.currentTime||new Date)-new Date(time))/1e3;return 0===parseInt(t)?"刚刚发布":parseInt(t)<60?"".concat(parseInt(t),"秒前"):parseInt(t/60)<60?"".concat(parseInt(t/60),"分钟前"):parseInt(t/60/60)<16?"".concat(parseInt(t/60/60),"小时前"):time.replace(/T/," ").replace(/Z/,"").substring(0,16)},o=function(t){var e=t-Math.round(new Date/1e3);return parseInt(e/86400,0)},c=function(t){var e=Math.round(new Date(t)/1e3),r=Math.round(new Date/1e3)-e,n=parseInt(r/86400,0);if(n>365){var o=parseInt(r/86400/365,0);return"".concat(o,"年")}return"".concat(n,"天")}},717:function(t,e,r){"use strict";r(159),r(790),r(36),r(13),r(32),r(24),r(35),r(34);var n=r(27),o=r(791),c=r(747);r(52);function l(){l=function(t,e){return new r(t,void 0,e)};var t=RegExp.prototype,e=new WeakMap;function r(t,n,o){var l=new RegExp(t,n);return e.set(l,o||e.get(t)),Object(c.a)(l,r.prototype)}function d(t,r){var g=e.get(r);return Object.keys(g).reduce((function(e,r){return e[r]=t[g[r]],e}),Object.create(null))}return Object(o.a)(r,RegExp),r.prototype.exec=function(e){var r=t.exec.call(this,e);return r&&(r.groups=d(r,this)),r},r.prototype[Symbol.replace]=function(r,o){if("string"==typeof o){var c=e.get(this);return t[Symbol.replace].call(this,r,o.replace(/\$<([^>]+)>/g,(function(t,e){return"$"+c[e]})))}if("function"==typeof o){var l=this;return t[Symbol.replace].call(this,r,(function(){var t=arguments;return"object"!==Object(n.a)(t[t.length-1])&&(t=[].slice.call(t)).push(d(t,l)),o.apply(this,t)}))}return t[Symbol.replace].call(this,r,o)},l.apply(this,arguments)}var d={topic:function(text){if(text){var t=l(/<[s\u017F]pan[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*id="topic"[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*value="([0-9A-Z_a-z\u017F\u212A]+)"[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*>((?:(?!<)[\s\S])+)<\/[s\u017F]pan>/gim,{value:1,string:2});return text.replace(t,(function(e){return e.replace(t,(function(content,t,text){var e="/topic/".concat(t);return'<a href="'.concat(e,'" class="content-topic a-blue">').concat(text,"</a> ")}))}))}},usermention:function(text){if(text){var t=l(/<[s\u017F]pan[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*id="member"[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*value="([0-9A-Z_a-z\u017F\u212A]+)"[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*>((?:(?!<)[\s\S])+)<\/[s\u017F]pan>/gim,{value:1,string:2});return text.replace(t,(function(e){return e.replace(t,(function(content,t,text){var e="/user/".concat(t);return'<a href="'.concat(e,'" class="content-member a-blue">').concat(text,"</a> ")}))}))}},parseHtml1:function(text){if(text){var t=/&lt;/gim;return text.replace(t,(function(e){return e.replace(t,(function(content,t,text){return"<"}))}))}},parseHtml2:function(text){if(text){var t=/&gt;/gim;return text.replace(t,(function(e){return e.replace(t,(function(content,t,text){return">"}))}))}}};e.a={parse:function(text){for(var t in d)text=d[t](text);return text}}},726:function(t,e){function r(t,e,r,n,o,c,l){try{var d=t[c](l),f=d.value}catch(t){return void r(t)}d.done?e(f):Promise.resolve(f).then(n,o)}t.exports=function(t){return function(){var e=this,n=arguments;return new Promise((function(o,c){var l=t.apply(e,n);function d(t){r(l,o,c,d,f,"next",t)}function f(t){r(l,o,c,d,f,"throw",t)}d(void 0)}))}},t.exports.default=t.exports,t.exports.__esModule=!0},747:function(t,e,r){"use strict";function n(t,p){return(n=Object.setPrototypeOf||function(t,p){return t.__proto__=p,t})(t,p)}r.d(e,"a",(function(){return n}))},784:function(t,e,r){},790:function(t,e,r){"use strict";var n,o=r(15),c=r(109)(0),l=r(37),meta=r(110),d=r(259),f=r(908),h=r(28),m=r(160),v=r(160),_=!o.ActiveXObject&&"ActiveXObject"in o,w=meta.getWeak,y=Object.isExtensible,C=f.ufstore,j=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},x={get:function(t){if(h(t)){var data=w(t);return!0===data?C(m(this,"WeakMap")).get(t):data?data[this._i]:void 0}},set:function(t,e){return f.def(m(this,"WeakMap"),t,e)}},F=t.exports=r(257)("WeakMap",j,x,f,!0,!0);v&&_&&(d((n=f.getConstructor(j,"WeakMap")).prototype,x),meta.NEED=!0,c(["delete","has","get","set"],(function(t){var e=F.prototype,r=e[t];l(e,t,(function(a,b){if(h(a)&&!y(a)){this._f||(this._f=new n);var e=this._f[t](a,b);return"set"==t?this:e}return r.call(this,a,b)}))})))},791:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(747);function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Object(n.a)(t,e)}},851:function(t,e,r){"use strict";r(784)},853:function(t,e,r){"use strict";r.r(e);r(13),r(25);var n=r(714),o={name:"RecommendUser",mixins:[r.n(n).a],props:{list:{type:Array,default:function(){return[]}}},data:function(){return{userList:[],loading:!1,pageNum:1,pageSize:4}},computed:{forums:function(){return this.$store.state.site.info.attributes||{}}},watch:{list:{handler:function(t){this.userList=t},deep:!0}},mounted:function(){0===this.list.length?this.getList():this.userList=this.list},methods:{getList:function(){var t=this;this.userList=[],this.loading=!0;var e={include:"groups",limit:this.pageSize};this.$store.dispatch("jv/get",["users/recommended",{params:e}]).then((function(e){var data=e;e&&Array.isArray(e)&&data.forEach((function(t,i){data[i].groupName=t.groups[0]?t.groups[0].name:""})),t.userList=data}),(function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},refresh:function(){this.getList()}}},c=(r(851),r(11)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"recommend-user-container"},[r("div",{staticClass:"recommend-user-title"},[t._v(t._s(t.$t("home.recommentUser")))]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"recommend-user-list"},[t._l(t.userList,(function(t,e){return r("user-item",{key:e,attrs:{item:t,show:"simple"}})})),t._v(" "),0===t.userList.length?r("div",{staticClass:"no-more"},[t._v(t._s(t.$t("discuzq.list.noData")))]):t._e()],2),t._v(" "),r("div",{staticClass:"refresh",on:{click:t.refresh}},[r("svg-icon",{staticClass:"icon",attrs:{type:"refresh"}}),t._v("\n    "+t._s(t.$t("home.refresh"))+"\n  ")],1)])}),[],!1,null,"3ec56a7b",null);e.default=component.exports;installComponents(component,{UserItem:r(802).default,SvgIcon:r(62).default})},908:function(t,e,r){"use strict";var n=r(115),o=r(110).getWeak,c=r(19),l=r(28),d=r(113),f=r(114),h=r(109),m=r(46),v=r(160),_=h(5),w=h(6),y=0,C=function(t){return t._l||(t._l=new j)},j=function(){this.a=[]},x=function(t,e){return _(t.a,(function(t){return t[0]===e}))};j.prototype={get:function(t){var e=x(this,t);if(e)return e[1]},has:function(t){return!!x(this,t)},set:function(t,e){var r=x(this,t);r?r[1]=e:this.a.push([t,e])},delete:function(t){var e=w(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,r,c){var h=t((function(t,n){d(t,h,e,"_i"),t._t=e,t._i=y++,t._l=void 0,null!=n&&f(n,r,t[c],t)}));return n(h.prototype,{delete:function(t){if(!l(t))return!1;var data=o(t);return!0===data?C(v(this,e)).delete(t):data&&m(data,this._i)&&delete data[this._i]},has:function(t){if(!l(t))return!1;var data=o(t);return!0===data?C(v(this,e)).has(t):data&&m(data,this._i)}}),h},def:function(t,e,r){var data=o(c(e),!0);return!0===data?C(t).set(e,r):data[t._i]=r,t},ufstore:C}}}]);